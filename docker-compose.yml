version: "2"
services:

  node:
    image: tezos/tezos:latest
    hostname: node
    network_mode: "host"
    command: tezos-node
    ports:
      - 9732:9732
    expose:
      - '8732'
    volumes:
      - node_data:/var/run/tezos/node
      - client_data:/var/run/tezos/client
    restart: on-failure

  baker-jakarta:
    image: tezos/tezos:latest
    hostname: baker-jakarta
    network_mode: "host"
    environment:
      - PROTOCOL=013-PtJakart
    command: tezos-baker
    links:
      - node
    volumes:
      - client_data:/var/run/tezos/client
    restart: on-failure

  accuser-jakarta:
    image: tezos/tezos:latest
    hostname: accuser-jakarta
    network_mode: "host"
    environment:
      - PROTOCOL=013-PtJakart
    command: tezos-accuser
    links:
      - node
    volumes:
      - client_data:/var/run/tezos/client
    restart: on-failure

volumes:
  node_data:
  client_data:


