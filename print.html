<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Batcher Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/marigold.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="DESIGN.html">Design</a></li><li class="chapter-item expanded affix "><a href="MARKET_MAKER.html">Community Market Maker</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="CONTRIBUTORS.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Batcher Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/marigold-dev/batcher" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="design-document-for-the-batch-clearing-dex-poc"><a class="header" href="#design-document-for-the-batch-clearing-dex-poc">Design document for the Batch Clearing DEX POC</a></h1>
<p>The aim of the batch clearing dex is to enable users to deposit tokens with the aim of being swapped at a fair price with bounded slippage and almost no impermanent loss.  To enable this users will deposit tokens during a deposit window; all deposits during this window will be a 'batch'. Once the deposit window is over the 'batch' will be 'locked'. Deposits to the dex will not specify a price for the swap, they will specify an offset to whichever oracle price is received after the 'batch' is 'locked'; those offsets being 0, +10bps, or -10bps.  Once the batch is locked there will be a waiting window before the process starts to await an oracle price.  Upon receipt of the oracle price, the batch is terminated and the orders are cleared.</p>
<blockquote>
<p>For V1, the deposit window will be 10 mins and then a wait time of 2 minutes before awaiting the oracle price.
Only the XTZ/USDT pair will be supported for V1</p>
</blockquote>
<p>After the termination of the batch, the users that placed orders can retrieve their funds.  Either the user's order did not clear and they retrieve their original funds or the order cleared (totally or partially) and the get an execution of their order.</p>
<h2 id="deposit"><a class="header" href="#deposit">Deposit</a></h2>
<p>The deposit window is open for a finite time period.  During the time period users can deposit their tokens for a BUY or SELL order on the token pair along with an offset to the future received oracle price.</p>
<blockquote>
<p>For V1, deposit windows won't run sequentially, in that as soon as a deposit window closes another will open straight away.  Once the deposit window closes, users will need to wait for that batch to be cleared before another deposit window opens.</p>
</blockquote>
<h2 id="waiting"><a class="header" href="#waiting">Waiting</a></h2>
<p>Once the deposit window has closed there will be a period of 2 minutes prior to awaiting an oracle price.  Once that period has elapsed the first received oracle price will close the batch and clearing will start.</p>
<h2 id="clearing"><a class="header" href="#clearing">Clearing</a></h2>
<p>The clearing process is the process of matching the orders to ensure that all users can trade at the fairest possible price.  Upon deposit there will be six categories of order.</p>
<h3 id="side"><a class="header" href="#side">Side</a></h3>
<p>Depending on whether you are buying or selling the pair you will either be on the BUY side or the SELL side. For the pair XTZ/USDT, XTZ is the base and USDT is the quote.  So if the XTZ/USDT rate was 1.9 you would get 1 unit of XTZ for 1.9 of USDT if I am buying the pair, i.e. on the BUY side.  If I am selling the pair, the inverse would be true.  The side of the trade is important to understand which token needs to be deposited in a given swap order.</p>
<h3 id="tolerance"><a class="header" href="#tolerance">Tolerance</a></h3>
<p>For any deposit, the user can specify the tolerance to the oracle price that they are willing to trade at. This means that each side can further be segregated into their tolerance levels; $Price_{oracle}-10bps$,  $Price_{oracle}$ ,  $Price_{oracle}+10bps$.</p>
<h3 id="clearing-level"><a class="header" href="#clearing-level">Clearing Level</a></h3>
<p>Given the three tolerance levels, we need to find the level at which we will clear the most orders; the clearing level.</p>
<p>Considering that the amount of deposits for each category is different then we have six categories with a differing amount of tokens deposited for each tolerance.</p>
<div class="table-wrapper"><table><thead><tr><th>Deposits</th><th style="text-align: center">P-10bps</th><th style="text-align: right">P</th><th style="text-align: right">P+10bps</th></tr></thead><tbody>
<tr><td><em>BUY</em></td><td style="text-align: center">X of USDT</td><td style="text-align: right">Y of USDT</td><td style="text-align: right">Z of USDT</td></tr>
<tr><td><em>SELL</em></td><td style="text-align: center">R of XTZ</td><td style="text-align: right">S of XTZ</td><td style="text-align: right">T of XTZ</td></tr>
</tbody></table>
</div>
<p>An added complexity is that if I am will to buy at $Price_{oracle}+10bps$ then I will also be implicitly interested in buying at $Price_{oracle}$ and $Price_{oracle}-10bps$ as they are both cheaper levels if I am on the BUY side.  The converse is true for the sell side in that if I sell for $Price_{oracle}-10bps$, then I would be willing to sell for the higher prices of $Price_{oracle}$ and $Price_{oracle}+10bps$.</p>
<h4 id="determining-the-clearing-level"><a class="header" href="#determining-the-clearing-level">Determining the clearing level</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Prices</th><th style="text-align: center">P-10bps</th><th style="text-align: right">P</th><th style="text-align: right">P+10bps</th></tr></thead><tbody>
<tr><td><em>BUY</em></td><td style="text-align: center">P / 1.0001</td><td style="text-align: right">P</td><td style="text-align: right">P * 1.0001</td></tr>
<tr><td><em>SELL</em></td><td style="text-align: center">1.0001 / P</td><td style="text-align: right">1/P</td><td style="text-align: right">1/ (1.0001 * P)</td></tr>
</tbody></table>
</div>
<h5 id="p-10bps-level"><a class="header" href="#p-10bps-level">P-10bps level</a></h5>
<p>Lets take the P-10bps sell level first.  All of the buy levels would be interested in buying at that price, so the clearing volume at that level would be:</p>
<p>$$ CP_{P-10bps} = \min(X + Y + Z, R * \dfrac{ 1.0001 }{P})  $$</p>
<h5 id="p-level"><a class="header" href="#p-level">P level</a></h5>
<p>Lets take the P sell level first.  Only the upper 2 buy levels would be interested in buying at that price, but the lower two SELL levels would be interested in selling so the clearing volume at that level would be:</p>
<p>$$ CP_{P} = \min(Y + Z, (R+S) *  \dfrac{1}{P})  $$</p>
<h5 id="p10bps-level"><a class="header" href="#p10bps-level">P+10bps level</a></h5>
<p>Lets take the P+10bps sell level first.  All of the sell levels would be interested in selling at that price, but only the upper BUY level would be interested in buying so the clearing volume at that level would be:</p>
<p>$$ CP_{P+10bps} = \min(Z, (R+S+T) * \dfrac{1}{(P * 1.0001)})  $$</p>
<h4 id="illustrative-examples"><a class="header" href="#illustrative-examples">Illustrative Examples</a></h4>
<p>If the Oracle price for XTZ/USDT is 1.9 and the tolerance is +/- 10 basis points, then the six price levels are:</p>
<div class="table-wrapper"><table><thead><tr><th>Price Levels</th><th style="text-align: center">BUY</th><th style="text-align: center">SELL</th></tr></thead><tbody>
<tr><td>Price + 10bps</td><td style="text-align: center">1.90019</td><td style="text-align: center">0.52626</td></tr>
<tr><td>Price</td><td style="text-align: center">1.9</td><td style="text-align: center">0.52631</td></tr>
<tr><td>Price - 10bps</td><td style="text-align: center">1.89981</td><td style="text-align: center">0.52636</td></tr>
</tbody></table>
</div>
<p>Assuming these levels we can determine some very basic illustrative examples of different market scenarios:</p>
<div class="table-wrapper"><table><thead><tr><th>MARKET</th><th>AMOUNTS SKEW</th><th>BUY X @ (P-)</th><th>BUY Y @ (P)</th><th>BUY Z @ (P+)</th><th>SELL R @ (P-)</th><th>SELL @ S (P)</th><th>SELL T @ (P+)</th><th>Orders cleared @ P-10bps</th><th>Orders cleared @ P</th><th>Orders cleared @ P+10bps</th><th>Clearance Level</th></tr></thead><tbody>
<tr><td>SELL PRESSUE</td><td>CENTERED</td><td>55</td><td>100</td><td>45</td><td>1000</td><td>1900</td><td>900</td><td>200</td><td>155</td><td>55</td><td>P-10bps</td></tr>
<tr><td>SELL PRESSUE</td><td>NEG</td><td>100</td><td>55</td><td>45</td><td>1900</td><td>1000</td><td>900</td><td>200</td><td>155</td><td>100</td><td>P-10bps</td></tr>
<tr><td>SELL PRESSUE</td><td>POS</td><td>45</td><td>55</td><td>100</td><td>900</td><td>1000</td><td>1900</td><td>200</td><td>100</td><td>45</td><td>P-10bps</td></tr>
<tr><td>BUY PRESSURE</td><td>CENTERED</td><td>250</td><td>100</td><td>250</td><td>95</td><td>190</td><td>95</td><td>50</td><td>150</td><td>200</td><td>P+10bps</td></tr>
<tr><td>BUY PRESSURE</td><td>NEG</td><td>250</td><td>100</td><td>250</td><td>190</td><td>95</td><td>95</td><td>100</td><td>150</td><td>200</td><td>P+10bps</td></tr>
<tr><td>BUY PRESSURE</td><td>POS</td><td>250</td><td>100</td><td>250</td><td>95</td><td>95</td><td>190</td><td>50</td><td>100</td><td>200</td><td>P+10bps</td></tr>
<tr><td>BALANCED</td><td>CENTERED</td><td>50</td><td>101</td><td>50</td><td>95</td><td>190</td><td>95</td><td>50</td><td>150</td><td>50</td><td>P</td></tr>
<tr><td>BALANCED</td><td>NEG</td><td>101</td><td>50</td><td>50</td><td>190</td><td>95</td><td>95</td><td>100</td><td>150</td><td>101</td><td>P</td></tr>
<tr><td>BALANCED</td><td>POS</td><td>50</td><td>50</td><td>101</td><td>95</td><td>95</td><td>190</td><td>50</td><td>100</td><td>50</td><td>P</td></tr>
<tr><td>BALANCED</td><td>OPPOSING (NEG)</td><td>50</td><td>50</td><td>101</td><td>190</td><td>95</td><td>95</td><td>100</td><td>100</td><td>50</td><td>P-10bps</td></tr>
<tr><td>BALANCED</td><td>OPPOSING (POS)</td><td>101</td><td>50</td><td>50</td><td>95</td><td>95</td><td>190</td><td>50</td><td>100</td><td>101</td><td>P+10bps</td></tr>
</tbody></table>
</div>
<p>Once we know the clearing level and the volume that can be cleared at that level,  we will know how many can be matched (some partially) and those will receive pro-rata execution of their orders.  For those that bid outside of the clearing level they will receive their deposits back when they claim.</p>
<blockquote>
<p>A Google <a href="https://docs.google.com/spreadsheets/d/1tWIQEVi2COW3UOH7BPbcNrqe77SsPqZVFqN7nfLe6mc/edit?usp=sharing">Sheet</a> with these calculations in is available.</p>
</blockquote>
<h2 id="claiming"><a class="header" href="#claiming">Claiming</a></h2>
<p>After clearing, users can claim their 'results', whether that be their original deposits, a partially matched order result or a fully filled order for the opposing token.</p>
<h1 id="timelines"><a class="header" href="#timelines">Timelines</a></h1>
<pre><code class="language-mermaid">gantt
   dateFormat YYYY-MM-DD
   title Timelines for Batcher going to mainnet
   excludes weekends

   section Development
   End of internal audit                                          :ia, 2023-01-09, 4d
   Fee Burning                                                    :fb, 2023-01-09, 4d
   Oracle                                                         :or, 2023-01-09, 10d
   Multiple Token Pools (incl. contract management and multisig)  :mtp, after fb, 3w
   Stabilisation / Final Testing                                  :ft, after mtp, 5d
   Mainnet launch                                                 :mn, after ft, 3d

   section Engagement
   Blog post for fee burning                                      :bpfb, 2023-01-20, 5d
   Blog post for token pools                                      :bptp, 2023-01-27, 5d
   Blog post for oracle                                           :bpor, 2023-02-10, 5d
   Blog post for mainnet                                          :bpmn, 2023-02-20, 5d

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="community-market-maker"><a class="header" href="#community-market-maker">Community Market Maker</a></h1>
<p>The community market maker is functionality to allow community members to provide liquidity to Batcher in return for a share of the trading fees.</p>
<h2 id="providing-liquidity"><a class="header" href="#providing-liquidity">Providing liquidity</a></h2>
<p>Any user can supply liquidity by depositing tokens into the market vault for that token. In return, the depositor will receive a market vault token that represents the user's share of the vault holdings. The market vault token can be redeemed at any time for the share of the holdings that currently exist in the market vault.</p>
<h2 id="liquidity-injection"><a class="header" href="#liquidity-injection">Liquidity Injection</a></h2>
<p>Liquidity in the market vault will be used by Batcher in batches where there is no market on one side of the trading pair. If liquidity is used then all trading fees in that batch will be given to the market vault for the token which was used to supply liquidity. These fees will be shared among the market vault participants according to the percentage of market value token a given user has. The amount of liquidity that is supplied to Batcher will be less than or equal to the position on the opposing size of the trade. This all depends on the liquidity available in the vault at a given time.</p>
<h3 id="auto-redemption"><a class="header" href="#auto-redemption">Auto-redemption</a></h3>
<p>When a batch is cleared that has used the liquidity in a market vault, the order that was placed to supply liquidity will be automatically redeemed. If the order was filled, the tokens redeemed will be stored in the market vault as foreign tokens. For example, if an order supplying liquidity from the tzBTC vault is filled and receives USDT upon redemption then the USDT will be allocated to the tzBTC vault as a foreign token.</p>
<h3 id="auto-exchange-of-foreign-tokens"><a class="header" href="#auto-exchange-of-foreign-tokens">Auto-exchange of foreign tokens</a></h3>
<p>If two vaults have a sufficient amount foreign tokens that can be exchanged with each other than Batcher will swap these amounts after receiving a next oracle price for the given pair of tokens. For example, assuming the tzBTC vault holds some USDT as foreign tokens and the USDT vault holds some tzBTC as foreign tokens then these will automatically be swapped between the market vaults using the oracle price.</p>
<h2 id="redemption"><a class="header" href="#redemption">Redemption</a></h2>
<p>A user can redeem a share of the market vault by depositing an amount of the market vault token which will be burned and the equivalent amount of tokens will be redeemed to the original deposit address. In addition to the redemption of tokens, the share of accumulated fees (in tez) will also will also be returned to the user.</p>
<h3 id="redemption-of-foreign-tokens"><a class="header" href="#redemption-of-foreign-tokens">Redemption of foreign tokens</a></h3>
<p>If the market vault holds a number of foreign tokens at the point of redemption then the holdings returned to the user will be the equivalent share of the market vault token along with an equivalent shares of foreign tokens held by the vault.</p>
<h2 id="relationship-between-vaults"><a class="header" href="#relationship-between-vaults">Relationship between vaults.</a></h2>
<p>There is NO relationship between the market vaults. Each vault is treated independently of each other and as such DOES NOT work like a constant sum or constant product liquidity pool in the traditional sense.</p>
<h2 id="impermanent-loss"><a class="header" href="#impermanent-loss">Impermanent Loss</a></h2>
<p>As stated the market vault doesn't work in the same way that a typical liquidity pool does. That said, there are potential loss vectors for a given provider, this will be due to the time that the vault has foreign tokens prior to swapping back to the market token.</p>
<ul>
<li>Loss due to missing out on price appreciation of non-stable token. As an example if a provider has deposited tzBTC in to the tzBTC vault and some of that liquidity has been used in the tzBTC/USDT pair then for an amount of time, the market vault will hold a portion of the original tzBTC as foreign tokens in the form of USDT. If during that period, the price of tzBTC were to rise then the provider would miss out on that price appreciation relative to just holding the original amount of tzBTC.</li>
<li>Loss due to depreciation of the non-stable token. This is the equivalent to holding something like tzBTC and the price depreciates resulting in a loss.</li>
</ul>
<p>Both types of loss are to some degree offset by the reward of trading fees from the use of liquidity within Batcher.</p>
<h3 id="gain"><a class="header" href="#gain">Gain</a></h3>
<p>Whilst a provider can incur losses by providing liquidity, there is also potential for gain (or at least the insulation against loss). Lets assume that some amoutn of the tzBTC vault has been used as liquidity in Batcher. The tzBTC vault will hold an amount of USDT as foreign tokens.  If, prior to those tokense bing swapped back to tzBTC, the price of tzBTC depreciates, then at the point of swap the vault will aquire more tzBTC than was previously swapped resulting in a net gain in the quantity of tzBTC.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/marigold.js"></script>

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
